Resources:
  Lambda:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: code
        S3Key: index.zip
      FunctionName: invalidate-cdn
      Handler: index.handler
      Runtime: nodejs8.10
      Role: arn:aws:iam::123456:role/role-name

  ImagesBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: images
      NotificationConfiguration:
        LambdaConfigurations:
          - Event: "s3:ObjectCreated:*"
            Function: !Ref Lambda
